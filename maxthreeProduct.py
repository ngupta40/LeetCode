class Solution(object):
    def maximumProduct(self, nums):
        if (len(nums) == 3):
            return nums[0] * nums[1] * nums[2]

        n1 = min(nums)
        nums.remove(n1)
        n2 = min(nums)
        nums.remove(n2)
        n4 = max(nums)
        nums.remove(n4)
        n5 = max(nums)
        nums.remove(n5)
        if (len(nums) == 0):
            return max(n1 * n2 * n4, n2 * n4 * n5)
        else:
            n6 = max(nums)
            nums.remove(n6)

            return max(n1 * n2 * n4, n4 * n5 * n6)

s1 = Solution()
#print s1.maximumProduct([-710,-107,-851,657,-14,-859,278,-182,-749,718,-640,127,-930,-462,694,969,143,309,904,-651,160,451,-159,-316,844,-60,611,-169,-73,721,-902,338,-20,-890,-819,-644,107,404,150,-219,459,-324,-385,-118,-307,993,202,-147,62,-94,-976,-329,689,870,532,-686,371,-850,-186,87,878,989,-822,-350,-948,-412,161,-88,-509,836,-207,-60,771,516,-287,-366,-512,509,904,-459,683,-563,-766,-837,-333,93,893,303,908,532,-206,990,280,826,-13,115,-732,525,-939,-787])
print s1.maximumProduct([1,2,3,4])
#print s1.maximumProduct([-1,-3,1,2,3])
#print s1.maximumProduct([722,634,-504,-379,163,-613,-842,-578,750,951,-158,30,-238,-392,-487,-797,-157,-374,999,-5,-521,-879,-858,382,626,803,-347,903,-205,57,-342,186,-736,17,83,726,-960,343,-984,937,-758,-122,577,-595,-544,-559,903,-183,192,825,368,-674,57,-959,884,29,-681,-339,582,969,-95,-455,-275,205,-548,79,258,35,233,203,20,-936,878,-868,-458,-882,867,-664,-892,-687,322,844,-745,447,-909,-586,69,-88,88,445,-553,-666,130,-640,-918,-7,-420,-368,250,-786])